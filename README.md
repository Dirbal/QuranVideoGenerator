<div align="center">

<img src="public/banner.png" alt="Quran Video Generator" width="100%" />

# ï·½

# Quran Video Generator | Ù…ÙÙˆÙ„ÙÙ‘Ø¯ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù†

**Ø£Ù†Ø´Ø¦ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨ØªÙ„Ø§ÙˆØ§Øª Ø¹Ø°Ø¨Ø© ÙˆØ®Ù„ÙÙŠØ§Øª Ø·Ø¨ÙŠØ¹ÙŠØ©**

**Create stunning Quranic videos with beautiful recitations and natural backgrounds**

[![Next.js](https://img.shields.io/badge/Next.js-16-black?style=for-the-badge&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-blue?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
[![FFmpeg](https://img.shields.io/badge/FFmpeg-libass-green?style=for-the-badge&logo=ffmpeg)](https://ffmpeg.org/)
[![License](https://img.shields.io/badge/License-MIT-gold?style=for-the-badge)](LICENSE)

[Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](#Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©) Â· [English](#english) Â· [Demo](#demo) Â· [Deploy](#deploy)

</div>

---

## Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

### âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

- ğŸ•Œ **Ø¢ÙŠØ§Øª Ù‚Ø±Ø¢Ù†ÙŠØ©** â€” Ø§Ø®ØªØ± Ø£ÙŠ Ø³ÙˆØ±Ø© ÙˆÙ†Ø·Ø§Ù‚ Ø¢ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…
- ğŸ™ï¸ **ØªÙ„Ø§ÙˆØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø©** â€” Ø£ÙƒØ«Ø± Ù…Ù† 20 Ù‚Ø§Ø±Ø¦ Ø¨Ø£ØµÙˆØ§Øª Ø¹Ø°Ø¨Ø©
- ğŸ–‹ï¸ **10 Ø®Ø·ÙˆØ· Ø¹Ø±Ø¨ÙŠØ©** â€” Ù†Ø³Ø®ØŒ Ø±Ù‚Ø¹Ø©ØŒ Ø­Ø¯ÙŠØ«Ø© (ÙƒÙ„Ù‡Ø§ Ø¨Ø­Ø±ÙˆÙ Ù…ØªØµÙ„Ø© Ø¹Ø¨Ø± HarfBuzz)
- ğŸ¬ **Ø®Ù„ÙÙŠØ§Øª Ø·Ø¨ÙŠØ¹ÙŠØ©** â€” Ø·Ø¨ÙŠØ¹Ø©ØŒ Ù…Ø­ÙŠØ·ØŒ Ø³Ù…Ø§Ø¡ØŒ ØµØ­Ø±Ø§Ø¡ØŒ ØºØ§Ø¨Ø© (Ù…Ù† Pixabay)
- ğŸ“– **ØªÙØ³ÙŠØ± Ù…ÙŠØ³Ù‘Ø±** â€” Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ± Ø£Ø³ÙÙ„ Ø§Ù„Ø¢ÙŠØ§Øª
- ğŸ“ **Ø£Ø­Ø¬Ø§Ù… Ù…ØªØ¹Ø¯Ø¯Ø©** â€” 16:9 (ÙŠÙˆØªÙŠÙˆØ¨)ØŒ 9:16 (Ø±ÙŠÙ„Ø²/ØªÙŠÙƒØªÙˆÙƒ)ØŒ 1:1ØŒ 4:5
- ğŸšï¸ **ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø³Ø·ÙˆØ¹** â€” Ø¶Ø¨Ø· Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
- ğŸŒ **Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ©** â€” ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© ÙˆØ¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©

### ğŸ› ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… |
|---|---|
| **Next.js 16** | Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (App Router + Server Actions) |
| **FFmpeg + libass** | ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ Ù†Øµ Ø¹Ø±Ø¨ÙŠ Ù…ØªØµÙ„ (HarfBuzz) |
| **ASS Subtitles** | ØªØ´ÙƒÙŠÙ„ Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¹Ø¨Ø± Ù…Ø­Ø±Ùƒ libass |
| **Quran API** | Ø¬Ù„Ø¨ Ø§Ù„Ø¢ÙŠØ§Øª ÙˆØ§Ù„ØªÙ„Ø§ÙˆØ§Øª ÙˆØ§Ù„ØªÙØ³ÙŠØ± |
| **Pixabay API** | Ø®Ù„ÙÙŠØ§Øª ÙÙŠØ¯ÙŠÙˆ Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¢Ù…Ù†Ø© |

### ğŸ—ï¸ Ø§Ù„ØªØ´ÙƒÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠ â€” ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ

Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: FFmpeg `drawtext` Ù„Ø§ ÙŠØ¯Ø¹Ù… HarfBuzz â€” Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØªØ¸Ù‡Ø± Ù…Ù†ÙØµÙ„Ø© ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.

**Ø§Ù„Ø­Ù„:** Ù†Ø³ØªØ®Ø¯Ù… ÙÙ„ØªØ± `subtitles` Ø¨Ø¯Ù„ `drawtext`:

```
drawtext (Ù‚Ø¯ÙŠÙ… â€” Ø¨Ø¯ÙˆÙ† HarfBuzz) â†’ subtitles + ASS (Ø¬Ø¯ÙŠØ¯ â€” Ù…Ø¹ HarfBuzz)
```

1. Ù†Ù†Ø´Ø¦ Ù…Ù„Ù `.ass` (Advanced SubStation Alpha) Ø¨ÙƒÙ„ Ø§Ù„Ø¢ÙŠØ§Øª ÙˆØ£Ø±Ù‚Ø§Ù…Ù‡Ø§ ÙˆØ§Ù„ØªÙØ³ÙŠØ±
2. FFmpeg ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø¹Ø¨Ø± **libass** Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ **HarfBuzz** Ù…Ø¯Ù…Ø¬
3. HarfBuzz ÙŠØªÙƒÙÙ„ Ø¨Ø§Ù„ØªØ´ÙƒÙŠÙ„: Ø§ØªØµØ§Ù„ Ø§Ù„Ø­Ø±ÙˆÙØŒ Ø§Ù„ØªØ´ÙƒÙŠÙ„ØŒ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª â€” Ù„ÙƒÙ„ Ø§Ù„Ø®Ø·ÙˆØ·

---

## English

### âœ¨ Features

- ğŸ•Œ **Quranic Verses** â€” Select any Surah and ayah range
- ğŸ™ï¸ **Multiple Reciters** â€” 20+ reciters with beautiful recitations
- ğŸ–‹ï¸ **10 Arabic Fonts** â€” Naskh, Ruqaa, Modern (all with connected letters via HarfBuzz)
- ğŸ¬ **Nature Backgrounds** â€” Nature, Ocean, Sky, Desert, Forest (from Pixabay)
- ğŸ“– **Tafsir** â€” Optional simplified tafsir below verses
- ğŸ“ **Multiple Ratios** â€” 16:9 (YouTube), 9:16 (Reels/TikTok), 1:1, 4:5
- ğŸšï¸ **Brightness Control** â€” Adjust background dimming
- ğŸŒ **Bilingual** â€” Arabic & English UI

### ğŸ› ï¸ Tech Stack

| Technology | Usage |
|---|---|
| **Next.js 16** | Full-stack framework (App Router + Server Actions) |
| **FFmpeg + libass** | Video generation with connected Arabic text (HarfBuzz) |
| **ASS Subtitles** | Precise Arabic text shaping via libass engine |
| **Quran API** | Verses, recitations, and tafsir data |
| **Pixabay API** | Safe nature background videos |

### ğŸ—ï¸ Arabic Text Shaping â€” How it Works

The problem: FFmpeg `drawtext` doesn't support HarfBuzz â€” Arabic letters appear disconnected in modern fonts.

**The solution:** Use the `subtitles` filter instead of `drawtext`:

1. Generate an `.ass` (Advanced SubStation Alpha) subtitle file with verses, numbers, and tafsir
2. FFmpeg renders text via **libass** which has **HarfBuzz** built-in
3. HarfBuzz handles shaping: letter connections, diacritics, kerning â€” for ALL fonts

---

## Deploy

### Docker (Recommended)

```bash
git clone https://github.com/Dirbal/QuranVideoGenerator.git
cd QuranVideoGenerator
docker build -t quran-video .
docker run -p 3000:3000 -e PIXABAY_API_KEY=your_key quran-video
```

### Render (One-Click)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)

1. Fork this repo
2. Connect to Render
3. Set `PIXABAY_API_KEY` in environment variables
4. Deploy!

### Local Development

```bash
# Install dependencies
npm install

# Create .env.local
echo "PIXABAY_API_KEY=your_pixabay_api_key" > .env.local

# Run dev server
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

---

## Environment Variables

| Variable | Required | Description |
|---|---|---|
| `PIXABAY_API_KEY` | âœ… | Free API key from [pixabay.com](https://pixabay.com/api/docs/) |

---

## Project Structure

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ generate/       # Video generation endpoint
â”‚   â”‚   â”œâ”€â”€ quran/           # Quran API proxy (chapters, verses, reciters, audio)
â”‚   â”‚   â””â”€â”€ videos/          # Pixabay video search
â”‚   â”œâ”€â”€ globals.css          # Design system
â”‚   â”œâ”€â”€ layout.tsx           # Root layout
â”‚   â””â”€â”€ page.tsx             # Main page
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ FontSelector.tsx     # 10 Arabic fonts with preview
â”‚   â”œâ”€â”€ BrightnessControl.tsx # Background dimming slider
â”‚   â”œâ”€â”€ ThemeSelector.tsx    # Background theme picker
â”‚   â”œâ”€â”€ ReciterSelector.tsx  # Reciter selection
â”‚   â””â”€â”€ ...                  # Other UI components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ ffmpeg.ts            # Video generation + Arabic reshaping + ASS subtitle engine
â”‚   â”œâ”€â”€ quran-api.ts         # Quran.com API client
â”‚   â”œâ”€â”€ pixabay.ts           # Pixabay video search
â”‚   â””â”€â”€ i18n.ts              # Arabic/English translations
public/
â””â”€â”€ fonts/                   # Arabic font files (.ttf)
```

---

## License

MIT License â€” free to use, modify, and distribute.

---

<div align="center">

**Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù**

Made with â¤ï¸ for the Ummah

</div>
